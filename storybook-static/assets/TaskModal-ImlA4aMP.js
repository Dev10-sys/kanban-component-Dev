import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{r as x}from"./index-GMfMMaR3.js";import{c as k,B as m,f as N,A as T}from"./KanbanBoard.stories-Bd_tug7Y.js";import{r as D}from"./index-DZ7dqxsW.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./iframe-De2Nk554.js";import"../sb-preview/runtime.js";const C=({isOpen:d,onClose:i,title:r,children:o,width:p="md"})=>{if(x.useEffect(()=>{const n=a=>{a.key==="Escape"&&i()};return d&&(document.body.style.overflow="hidden",window.addEventListener("keydown",n)),()=>{document.body.style.overflow="",window.removeEventListener("keydown",n)}},[d,i]),!d)return null;const u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return D.createPortal(e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:n=>{n.target===n.currentTarget&&i()},children:e.jsxs("div",{className:k("w-full bg-white rounded-lg shadow-xl overflow-hidden animate-slide-in flex flex-col max-h-[90vh]",u[p]),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[e.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:r}),e.jsx(m,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close modal",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:o})]})}),document.body)},E=({isOpen:d,onClose:i,task:r,columns:o,onSave:p,onDelete:u,initialColumnId:n})=>{var f,h;const[a,l]=x.useState({title:"",description:"",status:n||((f=o[0])==null?void 0:f.id)||"",priority:"medium",assignee:"",tags:[],dueDate:void 0}),[c,g]=x.useState("");x.useEffect(()=>{var t;d&&l(r?{...r,dueDate:r.dueDate?new Date(r.dueDate):void 0}:{title:"",description:"",status:n||((t=o[0])==null?void 0:t.id)||"",priority:"medium",assignee:"",tags:[],dueDate:void 0})},[d,r,n,o]);const v=t=>{t.preventDefault(),p(a),i()},b=()=>{var t;c.trim()&&!((t=a.tags)!=null&&t.includes(c.trim()))&&(l(s=>({...s,tags:[...s.tags||[],c.trim()]})),g(""))},w=t=>{l(s=>{var y;return{...s,tags:(y=s.tags)==null?void 0:y.filter(j=>j!==t)}})};return e.jsx(C,{isOpen:d,onClose:i,title:r?"Edit Task":"Create Task",width:"lg",children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{autoFocus:!0,type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",value:a.title||"",onChange:t=>l(s=>({...s,title:t.target.value})),placeholder:"Task title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",value:a.description||"",onChange:t=>l(s=>({...s,description:t.target.value})),placeholder:"Detailed description..."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",value:a.status,onChange:t=>l(s=>({...s,status:t.target.value})),children:o.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",value:a.priority,onChange:t=>l(s=>({...s,priority:t.target.value})),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",value:a.dueDate?N(new Date(a.dueDate),"yyyy-MM-dd"):"",onChange:t=>l(s=>({...s,dueDate:t.target.value?new Date(t.target.value):void 0}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assignee"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 sm:text-sm px-3 py-2 border focus:ring-blue-500 focus:border-blue-500 pl-10",placeholder:"Name or URL",value:a.assignee||"",onChange:t=>l(s=>({...s,assignee:t.target.value}))}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:e.jsx(T,{name:a.assignee,size:"sm"})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-2",children:(h=a.tags)==null?void 0:h.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-sm font-medium bg-blue-100 text-blue-700",children:[t,e.jsx("button",{type:"button",onClick:()=>w(t),className:"ml-1 text-blue-500 hover:text-blue-700 focus:outline-none",children:"Ã—"})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm px-3 py-2 border",placeholder:"Add tag...",value:c,onChange:t=>g(t.target.value),onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),b())}}),e.jsx(m,{type:"button",onClick:b,variant:"secondary",size:"sm",children:"Add"})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100",children:[e.jsx("div",{children:r&&u&&e.jsx(m,{type:"button",variant:"danger",onClick:()=>{confirm("Are you sure you want to delete this task?")&&(u(r.id),i())},children:"Delete"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{type:"button",variant:"ghost",onClick:i,children:"Cancel"}),e.jsx(m,{type:"submit",children:r?"Save Changes":"Create Task"})]})]})]})})};E.__docgenInfo={description:"",methods:[],displayName:"TaskModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},task:{required:!1,tsType:{name:"KanbanTask"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"KanbanColumn"}],raw:"KanbanColumn[]"},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(task: Partial<KanbanTask>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"KanbanTask"}],raw:"Partial<KanbanTask>"},name:"task"}],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(taskId: string) => void",signature:{arguments:[{type:{name:"string"},name:"taskId"}],return:{name:"void"}}},description:""},initialColumnId:{required:!1,tsType:{name:"string"},description:""}}};export{E as default};
